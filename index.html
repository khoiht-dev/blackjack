<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blackjack Online</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- M√†n h√¨nh ch√†o -->
        <div id="welcomeScreen" class="screen">
            <h1>üé∞ Blackjack Online</h1>
            <div class="input-group">
                <input type="text" id="playerName" placeholder="Nh·∫≠p t√™n c·ªßa b·∫°n" maxlength="20">
            </div>
            <div class="input-group">
                <label for="playerChips">S·ªë chip kh·ªüi ƒë·∫ßu:</label>
                <input type="number" id="playerChips" value="1000" min="100" max="10000" step="100">
            </div>
            <div class="input-group">
                <label for="dealerRounds">S·ªë v√≤ng m·ªói ng∆∞·ªùi l√†m dealer:</label>
                <input type="number" id="dealerRounds" value="3" min="1" max="10" step="1">
                <small style="display: block; color: #666; margin-top: 5px;">
                    M·ªói ng∆∞·ªùi s·∫Ω l√†m dealer l·∫ßn l∆∞·ª£t theo s·ªë v√≤ng n√†y
                </small>
            </div>
            <div class="input-group">
                <label for="baseBet">M·ª©c c∆∞·ª£c m·∫∑c ƒë·ªãnh:</label>
                <input type="number" id="baseBet" value="100" min="10" max="1000" step="10">
                <small style="display: block; color: #666; margin-top: 5px;">
                    S·ªë chip c∆∞·ª£c m·ªói v√°n cho t·∫•t c·∫£ ng∆∞·ªùi ch∆°i
                </small>
            </div>
            <div class="button-group">
                <button onclick="createRoom()" class="btn btn-primary">T·∫°o Room M·ªõi</button>
                <button onclick="showJoinRoom()" class="btn btn-secondary">Tham Gia Room</button>
            </div>
            <div id="joinRoomSection" class="join-room-section" style="display: none;">
                <input type="text" id="roomId" placeholder="Nh·∫≠p m√£ room" maxlength="6">
                <button onclick="joinRoom()" class="btn btn-primary">V√†o Room</button>
            </div>
        </div>

        <!-- M√†n h√¨nh ch·ªù -->
        <div id="waitingScreen" class="screen" style="display: none;">
            <h2>Ph√≤ng ch∆°i</h2>
            <div class="room-info">
                <p>M√£ room: <span id="currentRoomId" class="room-code"></span></p>
                <button onclick="copyRoomId()" class="btn btn-small">üìã Sao ch√©p</button>
            </div>
            <div class="players-list">
                <h3>Ng∆∞·ªùi ch∆°i trong ph√≤ng (t·ªëi ƒëa 5):</h3>
                <div id="playersList"></div>
            </div>
            <div class="button-group">
                <button onclick="startGame()" id="startGameBtn" class="btn btn-primary">B·∫Øt ƒë·∫ßu Game</button>
                <button onclick="leaveRoom()" class="btn btn-danger">R·ªùi ph√≤ng</button>
            </div>
        </div>

        <!-- M√†n h√¨nh ch∆°i game -->
        <div id="gameScreen" class="screen" style="display: none;">
            <div class="game-header">
                <div class="room-code-small">Room: <span id="gameRoomCode"></span></div>
                <button onclick="leaveRoom()" class="btn btn-danger btn-small">R·ªùi ph√≤ng</button>
            </div>

            <!-- Players Area (bao g·ªìm dealer) -->
            <div class="players-area" id="playersArea">
                <!-- C√°c player s·∫Ω ƒë∆∞·ª£c th√™m ƒë·ªông -->
            </div>

            <!-- Betting Area (cho ng∆∞·ªùi ch∆°i hi·ªán t·∫°i) -->
            <div class="betting-area" id="bettingArea" style="display: none;">
                <h4>ƒê·∫∑t c∆∞·ª£c c·ªßa b·∫°n</h4>
                <div class="chips-display">
                    S·ªë chip: <span id="currentChips" class="chips-amount">1000</span>
                </div>
                <div class="bet-input">
                    <input type="number" id="betAmount" min="10" step="10" value="50" placeholder="S·ªë chip ƒë·∫∑t c∆∞·ª£c">
                </div>
                <div class="quick-bet-buttons">
                    <button onclick="quickBet(10)" class="btn btn-chip">10</button>
                    <button onclick="quickBet(25)" class="btn btn-chip">25</button>
                    <button onclick="quickBet(50)" class="btn btn-chip">50</button>
                    <button onclick="quickBet(100)" class="btn btn-chip">100</button>
                    <button onclick="quickBet(250)" class="btn btn-chip">250</button>
                </div>
                <button onclick="placeBet()" class="btn btn-primary">ƒê·∫∑t c∆∞·ª£c</button>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons" id="actionButtons" style="display: none;">
                <button onclick="playerHit()" class="btn btn-success" id="hitBtn">Hit (R√∫t b√†i)</button>
                <button onclick="playerStand()" class="btn btn-warning" id="standBtn">Stand (D·ª´ng)</button>
            </div>

            <!-- Dealer Checking Controls -->
            <div class="dealer-checking-area" id="dealerCheckingArea" style="display: none;">
                <h4>üé© L∆∞·ª£t c·ªßa Dealer ki·ªÉm tra</h4>
                <div id="checkPlayersButtons" class="button-group">
                    <!-- Buttons s·∫Ω ƒë∆∞·ª£c th√™m ƒë·ªông -->
                </div>
            </div>

            <!-- Game Status -->
            <div class="game-status-area">
                <p id="gameStatus" class="game-status-text">Ch·ªù ng∆∞·ªùi ch∆°i ƒë·∫∑t c∆∞·ª£c...</p>
            </div>
        </div>

        <!-- M√†n h√¨nh k·∫øt qu·∫£ -->
        <div id="resultScreen" class="screen" style="display: none;">
            <h2>üé∞ K·∫øt qu·∫£ v√°n ch∆°i</h2>
            <div class="results-container" id="resultsContainer">
                <!-- K·∫øt qu·∫£ s·∫Ω ƒë∆∞·ª£c th√™m ƒë·ªông -->
            </div>
            <div class="button-group">
                <button onclick="nextRound()" class="btn btn-primary" id="nextRoundBtn">V√°n ti·∫øp theo</button>
                <button onclick="leaveRoom()" class="btn btn-danger">R·ªùi ph√≤ng</button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
    
    <!-- Firebase Credentials (Load tr∆∞·ªõc firebase-config.js) -->
    <script src="firebase-credentials.js"></script>
    
    <!-- Game Logic -->
    <script src="firebase-config.js"></script>
    <script src="game.js"></script>
</body>
</html>
